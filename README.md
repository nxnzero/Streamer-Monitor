# LycorisMonitor

–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç—Ä–∏–º–µ—Ä–æ–≤ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ Trovo —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –≤ Telegram.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

Streamer-Monitor - —ç—Ç–æ –ª–µ–≥–∫–æ–≤–µ—Å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Go, –∫–æ—Ç–æ—Ä–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å —Å—Ç—Ä–∏–º–µ—Ä–æ–≤ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ Trovo –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram, –∫–æ–≥–¥–∞ —Å—Ç—Ä–∏–º–µ—Ä—ã –≤—ã—Ö–æ–¥—è—Ç –≤ —ç—Ñ–∏—Ä.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞ —Å—Ç—Ä–∏–º–µ—Ä–æ–≤ Trovo –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üì± –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ —Å—Ç—Ä–∏–º–µ—Ä–∞ –≤ —ç—Ñ–∏—Ä
- üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å—Ç—Ä–∏–º–µ—Ä–æ–≤ –≤ JSON —Ñ–∞–π–ª–µ
- ‚ö° –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ HTTP –∫–ª–∏–µ–Ω—Ç—ã —Å –ø—É–ª–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- üõ°Ô∏è –ù–∞–¥–µ–∂–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- üèóÔ∏è –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
LycorisMonitor/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ app.go                 # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ interfaces/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ interfaces.go      # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ streamers.go       # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–∏–º–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ streamers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ streamers.go       # –§—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ streamers.json     # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–∏–º–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ telegram/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ client.go          # Telegram API –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ types.go           # –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö Telegram
‚îÇ   ‚îî‚îÄ‚îÄ trovo/
‚îÇ       ‚îú‚îÄ‚îÄ client.go          # Trovo API –∫–ª–∏–µ–Ω—Ç
‚îÇ       ‚îî‚îÄ‚îÄ types.go           # –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö Trovo
‚îú‚îÄ‚îÄ go.mod                     # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Go
‚îî‚îÄ‚îÄ README.md                  # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Go 1.24 –∏–ª–∏ –≤—ã—à–µ
- –ê–∫–∫–∞—É–Ω—Ç Trovo —Å API –¥–æ—Å—Ç—É–ø–æ–º
- Telegram Bot Token

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone <repository-url>
cd Streamer-Monitor
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
# Trovo API
export TROVO_CLIENT_ID="your_trovo_client_id"
export TROVO_ACCESS_TOKEN="your_trovo_access_token"
export TROVO_REFRESH_TOKEN="your_trovo_refresh_token"
export TROVO_CLIENT_SECRET="your_trovo_client_secret"

# Telegram (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤ –∫–æ–¥–µ)
export TELEGRAM_BOT_TOKEN="your_telegram_bot_token"
export TELEGRAM_CHAT_ID="your_telegram_chat_id"
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç—Ä–∏–º–µ—Ä–æ–≤

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `internal/streamers/streamers.json`:

```json
[
  {
    "username": "Nickname_1",
    "isLive": false,
    "lastCheck": "2024-01-01T00:00:00Z",
    "previews": [
      {
        "game": "Kenshi",
        "url": "https://example.com/i/preview_1"
      }
    ]
  }
]
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–ø–∏—Å–∫–∞ –∫–∞–Ω–∞–ª–æ–≤

–í —Ñ–∞–π–ª–µ `cmd/app.go` –∏–∑–º–µ–Ω–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö –∫–∞–Ω–∞–ª–æ–≤:

```go
channels := []string{
    "Nates13",
    "–ú–∏—Ä–∏–ª–∏—Ç",
    "–õ–µ—à–∏–π",
    "IllusiveHope",
}
```

### 5. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
go run cmd/app.go
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Telegram –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–í —Ñ–∞–π–ª–µ `internal/telegram/client.go`:

```go
const (
    TelegramToken       = "your_bot_token"
    TelegramChatID      = "your_chat_id"
    TelegramSendPhoto   = "https://api.telegram.org/bot{token}/sendPhoto"
)
```

### Trovo API –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–í —Ñ–∞–π–ª–µ `internal/trovo/client.go`:

```go
const (
    URL               = "https://open.trovo.live/page/login.html"
    URL_TOKEN_REFRESH = "https://open-api.trovo.live/openplatform/refreshtoken"
    URL_CHANNEL_INFO  = "https://open-api.trovo.live/openplatform/channels/id"
)
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### Streamer

```go
type Streamer struct {
    Username     string    `json:"username"`
    IsLive       bool      `json:"isLive"`
    LastCheck    time.Time `json:"lastCheck"`
    GamePreviews []Preview `json:"previews,omitempty"`
}
```

### Preview

```go
type Preview struct {
    Game string `json:"game"`
    URL  string `json:"url"`
}
```

## üîÑ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–∏–º–µ—Ä–æ–≤ –∏–∑ JSON —Ñ–∞–π–ª–∞
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–∞–Ω–∞–ª–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —á–µ—Ä–µ–∑ Trovo API
3. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ**: –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–º
4. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ**: –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –æ—Ñ–ª–∞–π–Ω ‚Üí –æ–Ω–ª–∞–π–Ω –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
5. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**: –û–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ JSON —Ñ–∞–π–ª

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å—Ç—Ä–∏–º–µ—Ä–∞

1. –î–æ–±–∞–≤—å—Ç–µ –∏–º—è –≤ –º–∞—Å—Å–∏–≤ `channels` –≤ `cmd/app.go`
2. –î–æ–±–∞–≤—å—Ç–µ –∑–∞–ø–∏—Å—å –≤ `internal/streamers/streamers.json`

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

1. –°–æ–∑–¥–∞–π—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ `internal/interfaces/interfaces.go`
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º –∫–ª–∏–µ–Ω—Ç–µ
3. –û–±–Ω–æ–≤–∏—Ç–µ `main()` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
go build ./cmd/app.go

# –ó–∞–ø—É—Å–∫ —Å –æ—Ç–ª–∞–¥–∫–æ–π
go run cmd/app.go
```

## üìù API Reference

### TrovoClient

```go
type TrovoClient interface {
    ChannelByUsername(username string) (*trovo.ChannelInfo, error)
    ChannelByID(channelID string) (*trovo.ChannelInfo, error)
    RefreshAccessToken(accessToken, refreshToken string) (string, string, error)
    ConfigureAuthorizationURL(ClientID, ResponseType string, Scope []string, RedirectURL string) (string, error)
}
```

### TelegramClient

```go
type TelegramClient interface {
    SendMessageWithPhoto(chatId, caption, imageUrl string) error
    SendTextMessage(text string) error
    SendMessageWithError(chatId string, err error) error
}
```

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–∫–ª—é—á–∞–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫:

- HTTP —Ç–∞–π–º–∞—É—Ç—ã –∏ —Å–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏
- –û—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON
- –û—à–∏–±–∫–∏ —Ñ–∞–π–ª–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –û—à–∏–±–∫–∏ API Trovo –∏ Telegram

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **HTTP –∫–ª–∏–µ–Ω—Ç—ã**: –ù–∞—Å—Ç—Ä–æ–µ–Ω –ø—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (100 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π, 10 –Ω–∞ —Ö–æ—Å—Ç)
- **–ê–ª–≥–æ—Ä–∏—Ç–º—ã**: O(n) —Å–ª–æ–∂–Ω–æ—Å—Ç—å –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å—Ç—Ä–∏–º–µ—Ä–æ–≤
- **–¢–∞–π–º–∞—É—Ç—ã**: 10 —Å–µ–∫—É–Ω–¥ –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤, 5 —Å–µ–∫—É–Ω–¥ –¥–ª—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- **Keep-Alive**: –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ —Ç–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∫–æ–¥–µ. –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. –í—ã–Ω–µ—Å—Ç–∏ –≤—Å–µ —Ç–æ–∫–µ–Ω—ã –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
3. –î–æ–±–∞–≤–∏—Ç—å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤—ã–≤–æ–¥–∏—Ç –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª—å:

```
Notification sent: Nickname_1 is now online
Streamer Nickname_1 is now offline
Error getting channel info for Nickname_1: connection timeout
```

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch (`git checkout -b feature/amazing-feature`)
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add amazing feature'`)
4. Push –≤ branch (`git push origin feature/amazing-feature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –°–º. —Ñ–∞–π–ª `LICENSE` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª `streamers.json` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API Trovo –∏ Telegram
4. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

## üîÑ –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### v1.1.0 (–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è)
- ‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç–∏
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã HTTP –∫–ª–∏–µ–Ω—Ç—ã
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∞–ª–≥–æ—Ä–∏—Ç–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### v1.0.0
- üéâ –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π —Ä–µ–ª–∏–∑
- üì± –ë–∞–∑–æ–≤—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç—Ä–∏–º–µ—Ä–æ–≤
- üì® –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram

---

**–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –Ω–∞ Go**
